module.exports = {
  config: {
    name: 'poet',
    aliases: ['poetry', 'shayari'],
    description: 'Random Urdu poetry',
    credits: 'SARDAR RDX',
    usage: 'poet',
    category: 'Fun',
    prefix: false
  },

  handleEvent: async function({ api, event, Users }) {
    const { threadID, messageID, body, senderID } = event;
    
    if (body && body.toLowerCase() === "poet") {
      let name = "Dost";
      try {
        if (Users && Users.getNameUser) {
          name = await Users.getNameUser(senderID);
        } else {
          const info = await api.getUserInfo(senderID);
          name = info[senderID]?.name || "Dost";
        }
      } catch {}

      const poetryLines = [
        "ูพฺพุฑ ุงุณ ฺฉ ุจุนุฏ ฺฉุง ุฏฺฉฺพ ฺฏุง ฺฉูุฆ ุงุณ ุฏฺฉฺพ ฺฉูุฆ ูุฑ ูุธุฑ ุณ",
        "ุชูฺบ ูุญุจุช ุณ ูุญุจุช ูู ูฺฏฺฏ ุชูฺบ ูุญุจุช ุณ ูุญุจุช ูู ูฺฏฺฏ ูุญุจุช ฺฉู ูุญุจุช ฺฉ ูฺฏุง ุณ ุชู ุฏฺฉฺพู",
        "ุงฺฉ ูุงู ฺฉุง ูฺฉฺพุง ุชุฑุง ุณุงุญู ฺฉ ุฑุช ูพุฑ ูพฺพุฑ ุนูุฑ ุจฺพุฑ ูุง ุณ ูุฑ ุฏุดูู ุฑ",
        "ุชุฑ ุนุดู ูฺบ ู ฺฏุง ุขุฌ ุฑุณูุง ุงูุฑ ูพฺพุฑ ฺฉูุฆ ูฺบ ุฏู ูฺบ ุชุฑ ุณูุง",
        "ุชู ู ุงฺฺพุง  ฺฉุง ู ุณ ฺฉูุงุฑุง ฺฉุฑฺฉ ุงุจ ูุง ุฏฺฉฺพฺบ ฺฏ ฺฉุจฺพ ุนุดู ุฏูุจุงุฑ ฺฉุฑฺฉ",
        "ุงูฺฏูุงฺบ ูุฑ ุญุงู ูพ ุงูนฺพุงู ูุงูู... ุนุดู ฺฉุง ุฏูุณุฑุง ูุงู ููุฑ ",
        "ฺฉุง ุฎุจุฑ ุชฺพ ุนุดู ฺฉ ุงุชฺพูฺบ ุงุณ ุญุงูุช ุชุจุง ูุช ",
        "ุณุงูุณ ูุช ูฺบ ุฏู ุงูุฌฺพุชุง  ุจุงุช ฺฉุฑุช ูฺบ ุข ูุช ",
        "ุจฺ  ุจุฑฺฉุช  ุชุฑ ุนุดู ูฺบ ุฌุจ ุณ ูุง  ุจฺฺพุชุง  ุฌุงุฑุง ",
        "ูฺบ ูุชุง ูฺบ ุชุฌฺพ ุณ ุฌุฏุง ุจูุฑูุณ ุฑฺฉฺพ  ูฺฉุงุญ ุนุดู  ุชุฑุง ุญู ูุฑ ูุฑ ุณุงูุณฺบ ฺบ",
        "ูฺบ ู ุงุณ ุฑุงุช ุชุฌฺพ  ูุงูฺฏุง ุฎุฏุง ุณ ุฌุณ ุฑุงุช ููฺฏ ุงูพู ุจุฎุดู ฺฉ ุฏุนุง ูุงูฺฏ ุฑ ุชฺพ",
        "ุบุฑูฺบ ูฺบ ุจูนุช ุฑ ุชุฑ ฺฏูุชฺฏู ฺฉ ฺุงุดู ุชุฑ ุขูุงุฒ ุฌู ฺฉุง ุฑุฒู ุชฺพ ู ูุงููฺบ ุณ ูุฑ ฺฏุฆ",
        "ฺฏุฑุช ุฑ ุณุฌุฏูฺบ ูฺบ ู ุงูพู ุญุณุฑุชูฺบ ฺฉ ุฎุงุทุฑ ุนุดู ุฎุฏุง ูฺบ ฺฏุฑ ูุช ฺฉูุฆ ุญุณุฑุช ุงุฏฺพูุฑ ู ูุช",
        "ูฺฏุง ฺฉุฑ ุนุดู ฺฉ ุจุงุฒ ุณูุง  ุฑููนฺพ ุจูนฺพ ู ูุญุจุช ูุงุฑ ฺุงู ฺฏ ุงุจฺพ ุชู ูพฺพูู ุฌุณ ู",
        "ูฺบ ุฎูุฏ ฺฉู ุจฺพ ฺฉุจ ูุณุฑ ูฺบ ุจ ุณุจุจ  ุชุฑุง ุฎูุง ููุง",
        "ฺฉุง ฺฉูฺบ ุงุจ ุนุดู ฺฉ ุฏุฑุฏ ฺฺพูพุงู ฺฉู ุชู ุฌุงูุช ููุง ูุฌฺพ ฺฉูุฆ ุจุงู ูฺบ ุขุชุง",
        "ุฎุงูู ุงุฑ ูฺบ ุจูนฺพ ูุฆ ู ููฺฏ ฺบ ู ุฌูฺบ ุฒูุงู ุณูุฌฺพุชุง  ฺฉูุฆ ฺฉุงู ูฺบ",
        "ุงุณ ูุฏุฑ ุงุณ ฺฉ ุฌุณุชุฌู  ูุฌฺพ ุฌุณ ุฏูุง ูฺบ ุขุฎุฑ ู ู ุดุฎุต",
        "ูฺบ ูุชุง ฺฉุณ ุทุจุจ ุณ ุงุณ ูุฑุถ ฺฉุง ุนูุงุฌ ุนุดู ูุง ุนูุงุฌ  ุจุณ ูพุฑุฒ ฺฉุฌ",
        "ุงุณ ฺุงุง ุชู ูุญุจุช ฺฉ ุณูุฌฺพ ุขุฆ ูุฑู ู ุนุดู ฺฉ ุชฺฉูู ฺฉ ุจุณ ุงูุณุงู ุณูุง ฺฉุฑุช ุชฺพ"
      ];

      const selectedLine = poetryLines[Math.floor(Math.random() * poetryLines.length)];

      const message = {
        body: `๊ง๐โค๏ธโ๐ฅ${name}โค๏ธโ๐ฅ๐๊ง\n\nใ๊ง๐\n   ${selectedLine} ๐๊งใ\n\nโค๏ธ๐๐โ๐ผโ : ๊ง๐๐๐ข๐ง๐ข-๐๐ฎ๐ญ๐ญ๊ง๐น`
      };

      return api.sendMessage(message, threadID, messageID);
    }
  },

  async run({ api, event, send, Users }) {
    const { threadID, messageID, senderID } = event;
    
    let name = "Dost";
    try {
      if (Users && Users.getNameUser) {
        name = await Users.getNameUser(senderID);
      } else {
        const info = await api.getUserInfo(senderID);
        name = info[senderID]?.name || "Dost";
      }
    } catch {}

    const poetryLines = [
      "ูพฺพุฑ ุงุณ ฺฉ ุจุนุฏ ฺฉุง ุฏฺฉฺพ ฺฏุง ฺฉูุฆ ุงุณ ุฏฺฉฺพ ฺฉูุฆ ูุฑ ูุธุฑ ุณ",
      "ุชูฺบ ูุญุจุช ุณ ูุญุจุช ูู ูฺฏฺฏ",
      "ุงฺฉ ูุงู ฺฉุง ูฺฉฺพุง ุชุฑุง ุณุงุญู ฺฉ ุฑุช ูพุฑ",
      "ุชุฑ ุนุดู ูฺบ ู ฺฏุง ุขุฌ ุฑุณูุง",
      "ุชู ู ุงฺฺพุง  ฺฉุง ู ุณ ฺฉูุงุฑุง ฺฉุฑฺฉ",
      "ุงูฺฏูุงฺบ ูุฑ ุญุงู ูพ ุงูนฺพุงู ูุงูู... ุนุดู ฺฉุง ุฏูุณุฑุง ูุงู ููุฑ ",
      "ฺฉุง ุฎุจุฑ ุชฺพ ุนุดู ฺฉ ุงุชฺพูฺบ ุงุณ ุญุงูุช ุชุจุง ูุช ",
      "ุณุงูุณ ูุช ูฺบ ุฏู ุงูุฌฺพุชุง  ุจุงุช ฺฉุฑุช ูฺบ ุข ูุช ",
      "ูฺบ ู ุงุณ ุฑุงุช ุชุฌฺพ  ูุงูฺฏุง ุฎุฏุง ุณ",
      "ูุธุฑ ูู ุขูฺฉฺพฺบ ุฌฺพฺฉ ุจุณ ุงุชู ุณ ุจุงุช ุงูุฑ ู ุจุฑุจุงุฏ"
    ];

    const selectedLine = poetryLines[Math.floor(Math.random() * poetryLines.length)];

    return send.reply(`๊ง๐โค๏ธโ๐ฅ${name}โค๏ธโ๐ฅ๐๊ง\n\nใ๊ง๐\n   ${selectedLine} ๐๊งใ\n\nโค๏ธ๐๐โ๐ผโ : ๊ง๐๐๐ข๐ง๐ข-๐๐ฎ๐ญ๐ญ๊ง๐น`);
  }
};
